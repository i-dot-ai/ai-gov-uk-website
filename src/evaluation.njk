---
layout: base.njk
templateEngineOverride: njk
pagination:
    data: evaluations
    size: 1
    alias: evaluation
permalink: "evaluations/{{ evaluation.title | slugify }}/"
# Note: If permalink changes - also update in base.njk
---


<div class="govuk-width-container">
  <div class="govuk-main-wrapper">

    <div class="iai-blog-title govuk-!-margin-top-4">
        <h1 class="govuk-heading-l govuk-!-margin-bottom-0" style="text-wrap: balance;">{{ evaluation.title }}</h1>
    </div>

    {% set cmsContent = evaluation.content | markdownToHtml(true) | safe %}

    <div class="iai-blog-content govuk-body">
        <div class="iai-blog-content__inner-container">

            <on-this-page></on-this-page>
            
            <div id="content">
                {{ cmsContent }}
            </div>
        </div>
          


        {# CMS Preview #}
        {% if evaluation.title === "CMS Preview" %}
            <script src="/js/add-govuk-classes.js"></script>
            <script>

                let contentContainer = document.querySelector("#content");
                let componentTemplates = {};
                let onThisPage = document.querySelector("on-this-page");

                // Defaults
                const removeUnwantedSections = () => {
                    let header = document.querySelector("header");
                    let footer = document.querySelector("footer");
                    if (!header || !footer) {
                        window.setTimeout(removeUnwantedSections, 100);
                        return;
                    }
                    header.style.display = "none";
                    document.querySelector("main").style.paddingTop = "0";
                    document.querySelector("main").style.paddingBottom = "2rem";
                    footer.style.display = "none";
                };
                window.addEventListener("DOMContentLoaded", removeUnwantedSections);
                removeUnwantedSections();

                // Data from CMS
                window.addEventListener('message', function(evt) {
                    document.querySelector("h1").textContent = evt.data.title || "[Title goes here]";
                    contentContainer.innerHTML = addGovukClasses(evt.data.content || '');
                    onThisPage.updateHeadings();
                });

            </script>
        {% endif %}

	</div>
</div>


<script type="module" src="/js/lit-components/on-this-page.mjs"></script>
